#####################################################################
#                                                                   #
# Tests for uuidx family of functions.                              #
#                                                                   #
#####################################################################
--echo #
--echo # Implement RFC 9562 standard for UUIDs
--echo #

--echo # install uuidx component
INSTALL COMPONENT 'file://component_uuidx_udf';

--echo # uuidx_version() with 1,3,4,5,67 versions
SELECT uuidx_version('{bc776b91-1e4b-11ef-bcff-0b9de0906f7d}');
SELECT uuidx_version('{905f8aa4-56fe-33ae-b318-293311ddf8de}');
SELECT uuidx_version('{12e8120c-8ab6-4898-8570-32ac169acbf6}');
SELECT uuidx_version('{0168c796-9e87-5d37-a2f6-eecabc720807}');
SELECT uuidx_version('{1ef1e4c5-b360-65b1-bac4-b3a602cb9872}');
SELECT uuidx_version('{018fc826-55ad-70f3-8019-2c429b48cf34}');

--echo #uuidx_version() with NULL arg
SELECT uuidx_version(NULL);
--echo #uuidx_version() with '' arg
SELECT uuidx_version('');
--echo #uuidx_version() with bad arg
SELECT uuidx_version('12354xy');

--echo # uuidx_variant()
SELECT uuidx_variant('{018fc826-55ad-70f3-8019-2c429b48cf34}');
--echo #uuidx_variant() with NULL arg
SELECT uuidx_variant(NULL);
--echo #uuidx_variant() with '' arg
SELECT uuidx_variant('');
--echo #uuidx_variant() with bad arg
SELECT uuidx_variant('12354xy');

--echo # is_uuidx() with right uuid
SELECT is_uuidx('{12345678-1234-5678-1234-567812345678}');
--echo # is_uuidx() with bad uuid
SELECT is_uuidx('{12345xyz-1234-5678-1234-567812345678}');
--echo # is_uuidx() with NULL uuid
SELECT is_uuidx(NULL);
--echo # is_uuidx() with empty string
SELECT is_uuidx('');


--echo # is_nil_uuid() with good not-nil uuid
SELECT is_nil_uuid('{12345678-1234-5678-1234-567812345678}');
--echo # is_nil_uuid() with nil uuid
SELECT is_nil_uuid('{00000000-0000-0000-0000-000000000000}');
--echo # is_nil_uuid() with NULL uuid
SELECT is_nil_uuidx(NULL);
--echo # is_nil_uuid() with empty string
SELECT is_nil_uuid('');

--echo # is_max_uuid() with good not-nil uuid
SELECT is_max_uuid('{12345678-1234-5678-1234-567812345678}');
--echo # is_nil_uuid() with nil uuid
SELECT is_nil_uuid('{00000000-0000-0000-0000-000000000000}');
--echo # is_nil_uuid() with NULL uuid
SELECT is_nil_uuidx(NULL);
--echo # is_nil_uuid() with empty string
SELECT is_nil_uuid('');
--echo # uninstall uuidx component
UNINSTALL COMPONENT 'file://component_uuidx_udf';

--echo #
--echo # end of test
--echo #

